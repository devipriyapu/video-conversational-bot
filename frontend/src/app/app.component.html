<main class="shell">
  <header class="shell-title">YouTube Video Chatbot</header>

  <section class="layout">
    <app-upload (indexed)="onIndexed($event)" (uploadingChange)="onUploadingChange($event)"></app-upload>

    <div class="chat-panel">
      @if (indexedVideoId) {
      <div class="context-row">
        <p>Active video: <strong>{{ indexedVideoId }}</strong> | Collection: <strong>{{ collectionName }}</strong></p>
        <button mat-stroked-button color="warn" (click)="deleteCollection()" [disabled]="isUploading">
          Delete Collection
        </button>
      </div>
      }

      @if (deleteMessage) {
      <p class="success">{{ deleteMessage }}</p>
      }

      @if (deleteError) {
      <p class="error">{{ deleteError }}</p>
      }

      <app-chat [videoId]="indexedVideoId" [collectionName]="collectionName" [disabled]="isUploading"></app-chat>
    </div>
  </section>
</main>
