<mat-card class="chat-card">
  <h2>Chat with Video</h2>

  <div class="messages">
    <p class="hint">ðŸ‘‹ Ask me anything about this video!</p>

    @for (msg of messages; track $index) {
    <div class="bubble" [class.user]="msg.sender === 'user'" [class.assistant]="msg.sender === 'assistant'">
      <pre>{{ msg.text }}</pre>

    </div>
    }
  </div>

  <form [formGroup]="form" (ngSubmit)="ask()" class="ask-form">
    <input class="message-input" formControlName="question" placeholder="Type your message..."
      [disabled]="disabled || loading" />
    <button mat-flat-button type="submit" class="send-btn" [disabled]="sendDisabled">Send</button>
  </form>

  @if (loading) {
  <div class="state-row">
    <mat-spinner diameter="20"></mat-spinner>
    <span>Generating answer...</span>
  </div>
  }

  @if (error) {
  <p class="error">{{ error }}</p>
  }
</mat-card>